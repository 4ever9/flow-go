

# processor
`import "github.com/dapperlabs/bamboo-node/internal/roles/verify/processor"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)
* [Subdirectories](#pkg-subdirectories)

## <a name="pkg-overview">Overview</a>
Package processor is in charge of the ExecutionReceipt processing flow.
It decides whether a receipt gets discarded/slashed/approved/cached, while relying on external side effects functions to trigger these actions (template pattern).
The package holds a queue of receipts and processes them in FIFO to utilise caching result and not re-validate a validated receipt submitted by another node.
Note a some concurrency optimisation is possible by having a queue-per-block-height without sacrificing any caching potential.




## <a name="pkg-index">Index</a>
* [func NewReceiptProcessor(effects Effects, rc *receiptProcessorConfig, hasher crypto.Hasher) *receiptProcessor](#NewReceiptProcessor)
* [func NewReceiptProcessorConfig(c *config.Config) *receiptProcessorConfig](#NewReceiptProcessorConfig)
* [type Effects](#Effects)


#### <a name="pkg-files">Package files</a>
[effects_interface.go](https://github.com/dapperlabs/bamboo-node/tree/master/internal/roles/verify/processor/effects_interface.go) [processor.go](https://github.com/dapperlabs/bamboo-node/tree/master/internal/roles/verify/processor/processor.go)





## <a name="NewReceiptProcessor">func</a> [NewReceiptProcessor](https://github.com/dapperlabs/bamboo-node/tree/master/internal/roles/verify/processor/processor.go?s=1177:1286#L32)
``` go
func NewReceiptProcessor(effects Effects, rc *receiptProcessorConfig, hasher crypto.Hasher) *receiptProcessor
```
NewReceiptProcessor returns a new processor instance.
A go routine is initialised and waiting to process new items.



## <a name="NewReceiptProcessorConfig">func</a> [NewReceiptProcessorConfig](https://github.com/dapperlabs/bamboo-node/tree/master/internal/roles/verify/processor/processor.go?s=4173:4245#L130)
``` go
func NewReceiptProcessorConfig(c *config.Config) *receiptProcessorConfig
```
NewReceiptProcessorConfig returns a new  receiptProcessorConfig  process.




## <a name="Effects">type</a> [Effects](https://github.com/dapperlabs/bamboo-node/tree/master/internal/roles/verify/processor/effects_interface.go?s=301:734#L9)
``` go
type Effects interface {
    IsValidExecutionReceipt(*types.ExecutionReceipt) (compute.ValidationResult, error)
    HasMinStake(*types.ExecutionReceipt) (bool, error)
    IsSealedWithDifferentReceipt(*types.ExecutionReceipt) (bool, error)
    Send(*types.ExecutionReceipt, []byte) error
    SlashExpiredReceipt(*types.ExecutionReceipt) error
    SlashInvalidReceipt(*types.ExecutionReceipt, *types.BlockPartExecutionResult) error
    HandleError(error)
}
```
Effects is an interface for external encapuslated funcs with side-effects to be used in the receipt processor. It follows the template pattern.














- - -
Generated by [godoc2md](http://godoc.org/github.com/lanre-ade/godoc2md)
