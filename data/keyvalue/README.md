

# keyvalue
`import "github.com/dapperlabs/bamboo-node/data/keyvalue"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)

## <a name="pkg-overview">Overview</a>
Package keyvalue provides an abstract interface for connecting to DBs and building/executing key-value queries on them.




## <a name="pkg-index">Index</a>
* [type DBConnector](#DBConnector)
  * [func NewpostgresDB(addr, user, password, dbname string) DBConnector](#NewpostgresDB)
* [type QueryBuilder](#QueryBuilder)


#### <a name="pkg-files">Package files</a>
[interface.go](https://github.com/dapperlabs/bamboo-node/tree/master/data/keyvalue/interface.go) [pg_connection.go](https://github.com/dapperlabs/bamboo-node/tree/master/data/keyvalue/pg_connection.go) [pg_query.go](https://github.com/dapperlabs/bamboo-node/tree/master/data/keyvalue/pg_query.go)






## <a name="DBConnector">type</a> [DBConnector](https://github.com/dapperlabs/bamboo-node/tree/master/data/keyvalue/interface.go?s=182:547#L5)
``` go
type DBConnector interface {
    // NewQuery returns an instance of a new QueryBuilder
    NewQuery() QueryBuilder
    // MigrateUp performs all the steps required to bring the backing DB into an initialised state
    MigrateUp() error
    // MigrateDown is the inverse of MigrateUp and intended to be used in testing environment to achieve a "clean slate".
    MigrateDown() error
}
```
DBConnector abstracts a db connection







### <a name="NewpostgresDB">func</a> [NewpostgresDB](https://github.com/dapperlabs/bamboo-node/tree/master/data/keyvalue/pg_connection.go?s=204:271#L15)
``` go
func NewpostgresDB(addr, user, password, dbname string) DBConnector
```
NewpostgresDB returns a DBConnector interface backed by a postgres DB





## <a name="QueryBuilder">type</a> [QueryBuilder](https://github.com/dapperlabs/bamboo-node/tree/master/data/keyvalue/interface.go?s=855:1461#L29)
``` go
type QueryBuilder interface {
    // InTransaction sets a query to run in a multi statement transaction
    InTransaction() QueryBuilder
    // AddGet adds a get statement
    AddGet(namespace string) QueryBuilder
    // AddSet adds a set statement
    AddSet(namespace string) QueryBuilder
    // AddDelete adds a delete statement
    AddDelete(namespace string) QueryBuilder
    // MustBuild is intended to be called once per query on server startup for performance considerations of some providers.
    MustBuild() QueryBuilder
    // Execute runs the query and returns its result
    Execute(params ...string) (result string, err error)
}
```
QueryBuilder builds a key value query and allow
For exmaple:
```go


	  dbConn := NewPostgresDB(options...)
	
	  setFooAndBar := dbConn.NewQuery().
		  AddSet("foo_collection").
		  AddSet("bar_collection").
		  InTransaction().
		  MustBuild()
	
	  setFooAndBar.Execute("key1", "value1", "key2", "value2")

```














- - -
Generated by [godoc2md](http://godoc.org/github.com/lanre-ade/godoc2md)
